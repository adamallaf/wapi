<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>WAPI: Scanning</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>Scanning</h1>  </div>
</div>
<div class="contents">

<p>This group consists of functions for scanning accessible access points (APs) in the range.  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__scan.html#gac2aff8efd76d361703528735af7531f9">wapi_scan_init</a> (int sock, const char *ifname)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Starts a scan on the given interface.  <a href="#gac2aff8efd76d361703528735af7531f9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__scan.html#gaa74552374156e69bc56ad15e2970b4ed">wapi_scan_stat</a> (int sock, const char *ifname)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Checks the status of the scan process.  <a href="#gaa74552374156e69bc56ad15e2970b4ed"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__scan.html#ga0f56cf40fb2fffe63334cdff19a812b6">wapi_scan_coll</a> (int sock, const char *ifname, <a class="el" href="structwapi__list__t.html">wapi_list_t</a> *aps)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Collects the results of a scan process.  <a href="#ga0f56cf40fb2fffe63334cdff19a812b6"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>This group consists of functions for scanning accessible access points (APs) in the range. </p>
<p>Unfortunately provided scanning API by wireless-tools libraries (libiw) is quite limited, and doesn't list all APs in the range. (See iw_process_scan() of libiw. For iwlist case, it has its own hardcoded magic for this stuff and it is not provided by libiw.) For this purpose, we needed to implement our own scanning routines. Furthermore, scanning requires extracting binary results returned from kernel over a <code>char</code> buffer, hence it causes dozens of hairy binary compatibility issues. Luckily, libiw provide an API method to cope with this: iw_extract_event_stream(). That's the only place in this project relying on libiw.</p>
<p>The scanning operation disable normal network traffic, and therefore you should not abuse of scan. The scan need to check the presence of network on other frequencies. While you are checking those other frequencies, you can not be on your normal frequency to listen to normal traffic in the cell. You need typically in the order of one second to actively probe all 802.11b channels (do the maths). Some cards may do that in background, to reply to scan commands faster, but they still have to do it. Leaving the cell for such an extended period of time is pretty bad. Any kind of streaming/low latency traffic will be impacted, and the user will perceive it (easily checked with telnet). People trying to send traffic to you will retry packets and waste bandwidth. Some applications may be sensitive to those packet losses in weird ways, and tracing those weird behavior back to scanning may take time. If you are in ad-hoc mode, if two nodes scan approx at the same time, they won't see each other, which may create associations issues. For those reasons, the scanning activity should be limited to what's really needed, and continuous scanning is a bad idea. --- Jean Tourrilhes </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga0f56cf40fb2fffe63334cdff19a812b6"></a><!-- doxytag: member="wapi.h::wapi_scan_coll" ref="ga0f56cf40fb2fffe63334cdff19a812b6" args="(int sock, const char *ifname, wapi_list_t *aps)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int wapi_scan_coll </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ifname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structwapi__list__t.html">wapi_list_t</a> *&nbsp;</td>
          <td class="paramname"> <em>aps</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Collects the results of a scan process. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>aps</em>&nbsp;</td><td>Pushes collected <code><a class="el" href="structwapi__scan__info__t.html" title="Linked list container for scan results.">wapi_scan_info_t</a></code> into this list. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="wireless_8c_source.html#l00739">739</a> of file <a class="el" href="wireless_8c_source.html">wireless.c</a>.</p>

<p>References <a class="el" href="util_8h_source.html#l00029">WAPI_ERROR</a>, <a class="el" href="wireless_8c_source.html#l00027">wapi_get_we_version()</a>, <a class="el" href="util_8h_source.html#l00015">WAPI_IOCTL_STRERROR</a>, <a class="el" href="util_8h_source.html#l00022">WAPI_STRERROR</a>, and <a class="el" href="util_8h_source.html#l00035">WAPI_VALIDATE_PTR</a>.</p>

</div>
</div>
<a class="anchor" id="gac2aff8efd76d361703528735af7531f9"></a><!-- doxytag: member="wapi.h::wapi_scan_init" ref="gac2aff8efd76d361703528735af7531f9" args="(int sock, const char *ifname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int wapi_scan_init </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ifname</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Starts a scan on the given interface. </p>
<p>Root privileges are required to start a scan. </p>

<p>Definition at line <a class="el" href="wireless_8c_source.html#l00617">617</a> of file <a class="el" href="wireless_8c_source.html">wireless.c</a>.</p>

<p>References <a class="el" href="util_8h_source.html#l00015">WAPI_IOCTL_STRERROR</a>.</p>

</div>
</div>
<a class="anchor" id="gaa74552374156e69bc56ad15e2970b4ed"></a><!-- doxytag: member="wapi.h::wapi_scan_stat" ref="gaa74552374156e69bc56ad15e2970b4ed" args="(int sock, const char *ifname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int wapi_scan_stat </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>ifname</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Checks the status of the scan process. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>zero, if data is ready; 1, if data is not ready; negative on failure. </dd></dl>

<p>Definition at line <a class="el" href="wireless_8c_source.html#l00635">635</a> of file <a class="el" href="wireless_8c_source.html">wireless.c</a>.</p>

<p>References <a class="el" href="util_8h_source.html#l00015">WAPI_IOCTL_STRERROR</a>.</p>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Dec 2 2010 23:20:01 for WAPI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
